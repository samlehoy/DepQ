<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Riwayat Hafalan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #f3f4f6;
        color: #374151;
        margin: 0;
        padding: 0;
        min-height: 100vh;
      }

      .main-content-area {
        overflow: hidden;
        min-height: 100vh;
        border-radius: 0;
        width: 100%;
      }

      @media (min-width: 768px) {
        .main-content-area {
          margin-top: 0;
          margin-bottom: 0;
          border-radius: 0;
        }
      }
    </style>
  </head>
  <body>
    <div class="main-content-area bg-white shadow-lg">
      <header
        class="flex items-center justify-between p-4 border-b border-gray-200 bg-white"
      >
        <a
          class="text-gray-600 p-2 rounded-md hover:bg-gray-100 transition-colors duration-200 focus:outline-none"
          href="setoran.html"
        >
          <!-- Ikon SVG untuk tombol kembali -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="2.5"
            stroke="currentColor"
            class="w-6 h-6"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M15.75 19.5L8.25 12l7.5-7.5"
            />
          </svg>
        </a>
        <h1 class="text-xl font-semibold text-gray-800 flex-1 text-center">
          Riwayat Hafalan
        </h1>
        <div class="w-10 h-10"></div>
      </header>
      <main id="history-list" class="p-4 space-y-4">
        <div id="loading-indicator" class="text-center text-gray-500 py-8">
          <i class="fas fa-spinner fa-spin text-3xl mb-2"></i>
          <p>Memuat riwayat...</p>
        </div>
      </main>
    </div>

    <script>
      const dummyHafalanData = [
        {
          surah: "An-Nas",
          ayat: "1-5",
          tanggal: "18/Mei/2025",
          status: "Mengulang",
        },
        {
          surah: "Al-Fatihah",
          ayat: "1-7",
          tanggal: "17/Mei/2025",
          status: "Mengulang",
        },
        {
          surah: "Al-Ikhlas",
          ayat: "1-4",
          tanggal: "16/Mei/2025",
          status: "Mengulang",
        },
        {
          surah: "Al-Falaq",
          ayat: "1-5",
          tanggal: "15/Mei/2025",
          status: "Tidak Mengulang",
        },
        {
          surah: "An-Nas",
          ayat: "1-5",
          tanggal: "14/Mei/2025",
          status: "Tidak Mengulang",
        },
        {
          surah: "Al-Kahf",
          ayat: "1-10",
          tanggal: "13/Mei/2025",
          status: "Mengulang",
        },
      ];

      function displayHafalanHistory(data) {
        const historyList = document.getElementById("history-list");
        historyList.innerHTML = ""; // Hapus konten yang ada untuk mencegah duplikasi

        data.forEach((item) => {
          // Menentukan kelas CSS untuk warna tombol berdasarkan status hafalan
          const buttonColorClass =
            item.status === "Mengulang"
              ? "bg-orange-500 hover:bg-orange-600 focus:ring-orange-400"
              : "bg-gray-700 hover:bg-gray-800 focus:ring-gray-600";

          // Membangun string HTML untuk setiap item hafalan
          const itemHtml = `
                    <div class="bg-teal-600 rounded-md p-4 shadow-md flex flex-col sm:flex-row items-start sm:items-center justify-between
                                transition-transform transform hover:scale-[1.01] cursor-pointer">
                        <div class="mb-2 sm:mb-0">
                            <p class="text-white text-lg font-medium">${item.surah}</p>
                            <p class="text-teal-100 text-sm">ayat: ${item.ayat}</p>
                        </div>
                        <div class="flex flex-col items-start sm:items-end w-full sm:w-auto">
                            <p class="text-white text-sm mb-2">${item.tanggal}</p>
                            <button class="px-5 py-2 rounded-md text-sm font-semibold w-full sm:w-auto
                                           ${buttonColorClass} text-white focus:outline-none focus:ring-2 focus:ring-opacity-75 shadow-lg
                                           transform hover:scale-105 transition-all duration-300 ease-in-out">
                                ${item.status}
                            </button>
                        </div>
                    </div>
                `;
          historyList.innerHTML += itemHtml;
        });
      }
      async function fetchCalendarData() {
        try {
          const today = new Date();
          const year = today.getFullYear();
          const month = String(today.getMonth() + 1).padStart(2, "0");
          const day = String(today.getDate()).padStart(2, "0");
          const gregorianDate = `${day}-${month}-${year}`;

          const apiUrl = `https://api.aladhan.com/v1/gregorianToHijri/${gregorianDate}`;
          console.log(`Fetching Hijri date from: ${apiUrl}`);

          const response = await fetch(apiUrl);
          const data = await response.json();

          if (data.data && data.data.hijri) {
            const hijriDate = `${data.data.hijri.day}/${data.data.hijri.month.en}/${data.data.hijri.year}`;
            console.log("Today's Hijri date:", hijriDate);
          } else {
            console.error("Failed to get Hijri date. API response:", data);
          }
        } catch (error) {
          console.error("Error fetching calendar data:", error);
        }
      }
      async function fetchQuranSurah() {
        try {
          const response = await fetch("https://api.alquran.cloud/v1/surah");
          const data = await response.json();

          if (data.data) {
            console.log("List of Quran Surahs:");
            data.data.forEach((surah) => {
              console.log(
                `${surah.number}. ${surah.englishName} (${surah.name}) - ${surah.numberOfAyahs} Ayahs`
              );
            });
          } else {
            console.error("Failed to get surah list:", data.message);
          }
        } catch (error) {
          console.error("Error fetching Quran surah data:", error);
        }
      }

      document.addEventListener("DOMContentLoaded", () => {
        displayHafalanHistory(dummyHafalanData);
        document.getElementById("loading-indicator").classList.add("hidden");
      });
    </script>
  </body>
</html>
